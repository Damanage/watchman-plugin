!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}({0:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Network=0]="Network",e[e.ClientDOMReady=1]="ClientDOMReady",e[e.DOMEvent=2]="DOMEvent",e[e.DOMMutation=3]="DOMMutation",e[e.SiebelLoginData=4]="SiebelLoginData",e[e.BrowserRequestEventsAndConfig=5]="BrowserRequestEventsAndConfig"}(o||(o={})),t.default=o},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.siebelLoginTagName="siebel-login-data",t.siebelLoginTagAttr="data-login",t.browserApplicationName="Watchman-angular-app"},13:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const common_1=__webpack_require__(1),ContentScriptMessage_1=__webpack_require__(5),InternalEventTypeEn_1=__webpack_require__(0);function getSiebelGoginData(e,t){var n=window,o=null,i=e;if(!o)if(n.SiebelApp&&n.SiebelApp.S_App&&"function"==typeof n.SiebelApp.S_App.GetProfileAttr)try{o={LoginName:n.SiebelApp.S_App.GetProfileAttr("Login Name"),Region:n.SiebelApp.S_App.GetProfileAttr("VTB24 Region"),RegionCode:n.SiebelApp.S_App.GetProfileAttr("VTB24 Region Code"),BranchId:n.SiebelApp.S_App.GetProfileAttr("VTB24 BIS Branch Id"),BranchName:n.SiebelApp.S_App.GetProfileAttr("VTB24 BIS Branch Name"),DivisionCode:n.SiebelApp.S_App.GetProfileAttr("VTB24 BIS Division Code"),DivisionName:n.SiebelApp.S_App.GetProfileAttr("VTB24 Primary Division Name")},localStorage[i]=JSON.stringify(o)}catch(e){o=null;var r=localStorage[i];if(r)try{o=JSON.parse(r)}catch(e){o=null}}else o=null;let s,a=window.document.getElementsByTagName(e);a.length?s=a[0]:(s=window.document.createElement(e),window.document.body.appendChild(s)),s.setAttribute(t,JSON.stringify(o))}chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){if(message.MessageType==ContentScriptMessage_1.ContentScriptMessageTypeEn.GetSiebelLoginData)$(document).ready(function(){let e=null;var t=localStorage[common_1.siebelLoginTagAttr];if(t)try{e=JSON.parse(t)}catch(t){e=null}if(!e){let t=document.getElementsByTagName(common_1.siebelLoginTagName);if(t.length){var n=t[0].getAttribute(common_1.siebelLoginTagAttr);if(n)try{e=JSON.parse(n)}catch(t){e=null}}}chrome.runtime.sendMessage(null,{EventType:InternalEventTypeEn_1.default.SiebelLoginData,Param:e})});else if(message.MessageType==ContentScriptMessage_1.ContentScriptMessageTypeEn.Eval){let rc={response:null,exception:null};try{let msg=message,ftext="(function() {";for(let e in msg.Context)msg.Context.hasOwnProperty(e)&&(ftext+="var "+e+" = "+JSON.stringify(msg.Context[e])+";");ftext+="return "+msg.Expression,ftext+=";})()",rc.response=eval(ftext)}catch(e){delete rc.response,rc.exception=e}sendResponse(rc)}else if(message.MessageType==ContentScriptMessage_1.ContentScriptMessageTypeEn.SetupDOMEventListners){let msg=message;msg.Events.forEach(e=>{let domEventCfg=e;$(document).on(domEventCfg.DOMEvent,domEventCfg.TargetElementSelector,function(domEvent){let evalRC,eventConfigurationId=domEventCfg.EventConfigurationId,exception;try{evalRC=!domEventCfg.OKExpression||eval(domEventCfg.OKExpression)}catch(e){evalRC=!0,exception=e}if(evalRC){let e=0;chrome.runtime.sendMessage(null,{EventType:InternalEventTypeEn_1.default.DOMEvent,EventSubtype:domEventCfg.DOMEvent,DOMEvent:JSON.parse(JSON.stringify(Object.assign({EventConfigurationId:eventConfigurationId},domEvent),function(t,n){return"string"!=typeof n&&e++>100?"<<replaced>>":n})),Exception:exception})}})})}else if(message.MessageType==ContentScriptMessage_1.ContentScriptMessageTypeEn.SetupDOMMutationListners){let msg=message;var config={attributes:!0,childList:!0};msg.Events.forEach(e=>{let domChangeEventCfg=e;$(domChangeEventCfg.TargetElementSelector||"body").each(function(ix,DOMEl){let ev=Object.assign({},e);new MutationObserver(function(mutaionList){let evalRC,exception=null;try{evalRC=!ev.OKExpression||eval(ev.OKExpression)}catch(e){exception=e,evalRC=!0}evalRC&&chrome.runtime.sendMessage(null,{EventType:InternalEventTypeEn_1.default.DOMMutation,EventSubtype:domChangeEventCfg.TargetElementSelector,Exception:exception})}).observe(DOMEl,config)})})}}),$(document).ready(function(){console.log("watchmanContent. doc.ready()");var e=document.createElement("script");e.text="("+getSiebelGoginData+")('"+common_1.siebelLoginTagName+"', '"+common_1.siebelLoginTagAttr+"');",document.body.appendChild(e);var t=localStorage[common_1.siebelLoginTagName];if(t)try{t=JSON.parse(t)}catch(e){t=null}chrome.runtime.sendMessage(null,{EventType:InternalEventTypeEn_1.default.ClientDOMReady,Param:t})})},5:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Eval=0]="Eval",e[e.SetupDOMEventListners=1]="SetupDOMEventListners",e[e.SetupDOMMutationListners=2]="SetupDOMMutationListners",e[e.GetSiebelLoginData=3]="GetSiebelLoginData"}(o=t.ContentScriptMessageTypeEn||(t.ContentScriptMessageTypeEn={}));t.ContentScriptMessageEval=class{constructor(e,t){this.Context=e,this.Expression=t,this.MessageType=o.Eval}};t.ContentScriptMessageSetupDOMListners=class{constructor(e){this.Events=e,this.MessageType=o.SetupDOMEventListners}};t.ContentScriptMessageSetupDOMMutationListners=class{constructor(e){this.Events=e,this.MessageType=o.SetupDOMMutationListners}};t.ContentScriptMessageGetSiebelLoginData=class{constructor(){this.MessageType=o.GetSiebelLoginData}}}});